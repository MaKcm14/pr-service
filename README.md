# Pull-request service

---

## Как запускать?
В корне проекта есть `Makefile`, через который можно выполнить следующие команды для старта/стопа сервиса (команды выполняются из корня проекта):

1. `make build` - запускаем сборку образов для compose-стека.
2. `make start-db` - запускаем контейнер для БД. 
    Ждем минуту, пока `PostgreSQL` не инициализируется полностью и не будет готов принимать соединения.
3. `make migrate` - осуществляем накатывание миграций в контейнере `postgres`.
4. `make start-service` - запускаем непосредственно сам сервис.

После указанных шагов сервис будет готов к использованию.

Если запуск через `Makefile` невозможен, то можно воспользоваться кроссплатформенностью докера и запустить команды ровно в той же последовательности, в которой они описываются в каждом из тегов `Makefile`.

---

## Как остановить?
Для остановки сервиса используется команда:
1. `make stop` - останавливаем работу контейнеров compose-стека.

---

## Где искать параметры подключения?
Параметры подключения к базе данных, а также сокет можно найти в корневой папке `configs`, в файле `.env`.

Стоит заметить, что в сервисе используется логирование. Для просмотра актуальных логов нужно перейти в том докера `pr-service-data`, в котором и будет располагаться смонтированная папка `logs`.

Дефолтно сервис работает с БД через `bridge` режим в пределах сети контейнера, а сам сервис доступен извне на порте `8080` по `HTTP`.

---

## P.S.
В ходе написания решения была выявлена некоторая неоднозначность в API:

1. `Проблема:` при создании существующей команды должны получать ошибку. Но при этом
    в идеале хотелось бы иметь способ изменять существующий пользователей в существующей команде.
    
    `Решение:` было принято решение создавать (если их до этого не было) и/или обновлять пользователей даже в запросах на создание уже существующей команды.

